{% extends 'PartyBag/base.html' %}
{% block content %}

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='PartyBag/categories.css') }}">
    <style>
        body{
            background-color: #FFFFFF;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='90' height='90' viewBox='0 0 90 90'%3E%3Ccircle fill-opacity='0.5' fill='%23FFCAD4' cx='45' cy='45' r='10'/%3E%3Cg fill='%23FFE7D4' fill-opacity='0.5'%3E%3Ccircle cx='0' cy='90' r='10'/%3E%3Ccircle cx='90' cy='90' r='10'/%3E%3Ccircle cx='90' cy='0' r='10'/%3E%3Ccircle cx='0' cy='0' r='10'/%3E%3C/g%3E%3C/svg%3E");
        }
    </style>
</head>

<h1>All Birthday Bags!</h1>
<h2>Pick the perfect finishing touches for your party bags.</h2>
<h3>Birthday bags are the ultimate way to add a touch of magic and excitement to any celebration. Whether you're planning a party for kids or adults, these bags are filled with delightful surprises that leave a lasting impression. From colorful designs to thoughtful goodies, birthday bags are a perfect way to thank your guests and make them feel special. Explore our wide range of options to find the perfect match for your party theme and create unforgettable memories for everyone involved!</h3>

{% if products %}
    {% for subcat, items in products|groupby('subcategory') %}
        <hr class="section-divider">
        <h2 style="font-weight: bold;" class="subcategory-title">{{ subcat or 'Uncategorized' }}</h2>
        <div class="extras-grid">
            {% for product in items %}
            <div class="category-card extras-card">
                <a href="{{ url_for('partybags.product', product_id=product.id) }}">
                    {% if product.image %}
                    <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.name }}" width="220" height="220">
                    {% else %}
                    <img src="{{ url_for('static', filename='imgs/no_image.png') }}" alt="No image" width="220" height="220">
                    {% endif %}
                    <p>{{ product.name }}</p>
                    <p>Â£{{ product.price }}</p>
                </a>

                {% if product.stock > 0 %}
                <form action="{{ url_for('partybags.add_to_cart', product_id=product.id) }}" method="POST">
                    <input type="hidden" name="quantity" value="1">
                    <button type="submit">Add to Cart</button>
                </form>
                {% else %}
                <p style="color:red;">Out of stock</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    {% endfor %}
{% else %}
<div class="row-of-whatever">
    <h1>No birthday bags are available right now - please check back soon!</h1>
</div>
{% endif %}

{% endblock %}
